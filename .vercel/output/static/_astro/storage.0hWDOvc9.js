class r{CUSTOMERS_KEY="invoice_customers";INVOICES_KEY="invoice_invoices";BUSINESS_KEY="invoice_business";getCustomers(){if(typeof window>"u")return[];const t=localStorage.getItem(this.CUSTOMERS_KEY);return t?JSON.parse(t):[]}getCustomer(t){return this.getCustomers().find(e=>e.id===t)||null}saveCustomer(t){const s=this.getCustomers(),e={...t,id:crypto.randomUUID(),createdAt:new Date().toISOString()};return s.push(e),localStorage.setItem(this.CUSTOMERS_KEY,JSON.stringify(s)),e}updateCustomer(t,s){const e=this.getCustomers(),i=e.findIndex(n=>n.id===t);return i===-1?null:(e[i]={...e[i],...s},localStorage.setItem(this.CUSTOMERS_KEY,JSON.stringify(e)),e[i])}deleteCustomer(t){const s=this.getCustomers(),e=s.filter(i=>i.id!==t);return e.length===s.length?!1:(localStorage.setItem(this.CUSTOMERS_KEY,JSON.stringify(e)),!0)}getInvoices(){if(typeof window>"u")return[];const t=localStorage.getItem(this.INVOICES_KEY);return t?JSON.parse(t):[]}getInvoice(t){return this.getInvoices().find(e=>e.id===t)||null}getInvoicesByCustomer(t){return this.getInvoices().filter(e=>e.customerId===t)}getNextInvoiceNumber(){const s=this.getInvoices().map(i=>parseInt(i.invoiceNumber.replace(/\D/g,""))).filter(i=>!isNaN(i)),e=s.length>0?Math.max(...s):0;return`FAC-${String(e+1).padStart(5,"0")}`}saveInvoice(t){const s=this.getInvoices(),e={...t,id:crypto.randomUUID()};return s.push(e),localStorage.setItem(this.INVOICES_KEY,JSON.stringify(s)),e}updateInvoice(t,s){const e=this.getInvoices(),i=e.findIndex(n=>n.id===t);return i===-1?null:(e[i]={...e[i],...s},localStorage.setItem(this.INVOICES_KEY,JSON.stringify(e)),e[i])}deleteInvoice(t){const s=this.getInvoices(),e=s.filter(i=>i.id!==t);return e.length===s.length?!1:(localStorage.setItem(this.INVOICES_KEY,JSON.stringify(e)),!0)}getBusinessSettings(){if(typeof window>"u")return this.getDefaultSettings();const t=localStorage.getItem(this.BUSINESS_KEY);return t?JSON.parse(t):this.getDefaultSettings()}saveBusinessSettings(t){localStorage.setItem(this.BUSINESS_KEY,JSON.stringify(t))}getDefaultSettings(){return{name:"Mi Empresa",rif:"J-00000000-0",address:"DirecciÃ³n de la empresa",phone:"+58 412-0000000",email:"info@miempresa.com",taxPercentage:16,currency:"USD"}}clearAll(){typeof window>"u"||(localStorage.removeItem(this.CUSTOMERS_KEY),localStorage.removeItem(this.INVOICES_KEY),localStorage.removeItem(this.BUSINESS_KEY))}}const c=new r;export{c as s};
