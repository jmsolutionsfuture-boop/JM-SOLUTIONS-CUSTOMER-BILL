import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as d}from"./index.BbCjBGhI.js";import{u as L,C as i,a as u}from"./card.DRHvi6JW.js";import{B as m}from"./button.CoVCTGaF.js";import{I}from"./index.D9xJzycJ.js";import{S as j,a as f,b as p,c as g,d as t}from"./select.m9jejSwE.js";import{T as D,a as F,b as N,c as r,d as V,e as l}from"./table.C0l1eO0d.js";import{P as B,T as $}from"./trash-2.DUN9syJc.js";import{S as z}from"./search.CfwXa53Z.js";import{c as A}from"./utils.DWbH76R9.js";import{E as P}from"./eye.Cx7FH754.js";import"./_commonjsHelpers.D6-XlEtG.js";import"./storage.0hWDOvc9.js";import"./index.Bbz0MuBC.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],H=A("funnel",k),ee=()=>{const{invoices:x,updateInvoice:b,deleteInvoice:v}=L(),[o,w]=d.useState(""),[c,C]=d.useState("all"),h=d.useMemo(()=>{let s=[...x].sort((a,n)=>new Date(n.date).getTime()-new Date(a.date).getTime());if(o){const a=o.toLowerCase();s=s.filter(n=>{const E=(n.invoiceNumber||"").toLowerCase(),y=(n.customerName||"").toLowerCase();return E.includes(a)||y.includes(a)})}return c&&c!=="all"&&(s=s.filter(a=>(a.status||"").toLowerCase()===c.toLowerCase())),s},[x,o,c]),S=(s,a)=>{confirm(`¿Eliminar factura ${a}?`)&&v(s)},T=s=>{switch(s){case"paid":return"bg-success text-white border-transparent";case"sent":return"bg-amber-100 text-amber-700 border-amber-200";default:return"bg-slate-100 text-slate-600 border-slate-200"}};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-extrabold tracking-tight",children:"Facturas"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"Gestiona todas tus facturas y estados de pago."})]}),e.jsx(m,{size:"lg",className:"h-12 shadow-md gap-2",asChild:!0,children:e.jsxs("a",{href:"/facturas/nueva",children:[e.jsx(B,{className:"w-5 h-5"})," Nueva Factura"]})})]}),e.jsx(i,{children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(I,{placeholder:"Buscar por número o cliente...",className:"pl-9",value:o,onChange:s=>w(s.target.value)})]}),e.jsx("div",{className:"flex gap-2 min-w-[200px]",children:e.jsxs(j,{value:c,onValueChange:C,children:[e.jsxs(f,{children:[e.jsx(H,{className:"w-4 h-4 mr-2 opacity-50"}),e.jsx(p,{placeholder:"Estado"})]}),e.jsxs(g,{children:[e.jsx(t,{value:"all",children:"Todos los estados"}),e.jsx(t,{value:"draft",children:"Borrador"}),e.jsx(t,{value:"sent",children:"Enviada"}),e.jsx(t,{value:"paid",children:"Pagada"})]})]})})]})})}),h.length===0?e.jsx(i,{className:"border-dashed py-12",children:e.jsx(u,{className:"text-center text-muted-foreground",children:"No se encontraron facturas."})}):e.jsx(i,{children:e.jsxs(D,{children:[e.jsx(F,{children:e.jsxs(N,{children:[e.jsx(r,{children:"Número"}),e.jsx(r,{children:"Cliente"}),e.jsx(r,{children:"Fecha"}),e.jsx(r,{children:"Vencimiento"}),e.jsx(r,{children:"Total"}),e.jsx(r,{children:"Estado"}),e.jsx(r,{className:"text-right",children:"Acciones"})]})}),e.jsx(V,{children:h.map(s=>e.jsxs(N,{children:[e.jsx(l,{className:"font-bold",children:s.invoiceNumber}),e.jsx(l,{children:e.jsx("a",{href:`/clientes/${s.customerId}`,className:"text-primary hover:underline font-medium",children:s.customerName})}),e.jsx(l,{className:"text-muted-foreground",children:new Date(s.date).toLocaleDateString("es-VE")}),e.jsx(l,{className:"text-muted-foreground",children:new Date(s.dueDate).toLocaleDateString("es-VE")}),e.jsxs(l,{className:"font-bold",children:["$",s.total.toFixed(2)]}),e.jsx(l,{children:e.jsxs(j,{value:s.status,onValueChange:a=>b(s.id,{status:a}),children:[e.jsx(f,{className:`h-8 w-[110px] text-xs font-semibold px-2 ${T(s.status)}`,children:e.jsx(p,{})}),e.jsxs(g,{children:[e.jsx(t,{value:"draft",children:"Borrador"}),e.jsx(t,{value:"sent",children:"Enviada"}),e.jsx(t,{value:"paid",children:"Pagada"})]})]})}),e.jsx(l,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(m,{variant:"ghost",size:"icon",asChild:!0,title:"Ver Factura",children:e.jsx("a",{href:`/facturas/${s.id}`,children:e.jsx(P,{className:"w-4 h-4"})})}),e.jsx(m,{variant:"ghost",size:"icon",className:"text-destructive hover:bg-destructive/10",title:"Eliminar",onClick:()=>S(s.id,s.invoiceNumber),children:e.jsx($,{className:"w-4 h-4"})})]})})]},s.id))})]})})]})};export{ee as default};
