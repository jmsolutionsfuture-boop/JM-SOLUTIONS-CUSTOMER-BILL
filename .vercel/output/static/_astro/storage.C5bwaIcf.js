class r{CUSTOMERS_KEY="invoice_customers";INVOICES_KEY="invoice_invoices";BUSINESS_KEY="invoice_business";getCustomers(){if(typeof window>"u"||!window.localStorage)return[];try{const e=localStorage.getItem(this.CUSTOMERS_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading customers from storage",e),[]}}getCustomer(e){return this.getCustomers().find(t=>t.id===e)||null}saveCustomer(e){const o=this.getCustomers(),t={...e,id:crypto.randomUUID(),createdAt:new Date().toISOString()};return o.push(t),typeof window<"u"&&window.localStorage&&localStorage.setItem(this.CUSTOMERS_KEY,JSON.stringify(o)),t}updateCustomer(e,o){const t=this.getCustomers(),i=t.findIndex(n=>n.id===e);return i===-1?null:(t[i]={...t[i],...o},typeof window<"u"&&window.localStorage&&localStorage.setItem(this.CUSTOMERS_KEY,JSON.stringify(t)),t[i])}deleteCustomer(e){const o=this.getCustomers(),t=o.filter(i=>i.id!==e);return t.length===o.length?!1:(typeof window<"u"&&window.localStorage&&localStorage.setItem(this.CUSTOMERS_KEY,JSON.stringify(t)),!0)}getInvoices(){if(typeof window>"u"||!window.localStorage)return[];try{const e=localStorage.getItem(this.INVOICES_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading invoices from storage",e),[]}}getInvoice(e){return this.getInvoices().find(t=>t.id===e)||null}getInvoicesByCustomer(e){return this.getInvoices().filter(t=>t.customerId===e)}getNextInvoiceNumber(){const o=this.getInvoices().map(i=>parseInt(i.invoiceNumber.replace(/\D/g,""))).filter(i=>!isNaN(i)),t=o.length>0?Math.max(...o):0;return`FAC-${String(t+1).padStart(5,"0")}`}saveInvoice(e){const o=this.getInvoices(),t={...e,id:crypto.randomUUID()};return o.push(t),typeof window<"u"&&window.localStorage&&localStorage.setItem(this.INVOICES_KEY,JSON.stringify(o)),t}updateInvoice(e,o){const t=this.getInvoices(),i=t.findIndex(n=>n.id===e);return i===-1?null:(t[i]={...t[i],...o},typeof window<"u"&&window.localStorage&&localStorage.setItem(this.INVOICES_KEY,JSON.stringify(t)),t[i])}deleteInvoice(e){const o=this.getInvoices(),t=o.filter(i=>i.id!==e);return t.length===o.length?!1:(typeof window<"u"&&window.localStorage&&localStorage.setItem(this.INVOICES_KEY,JSON.stringify(t)),!0)}getBusinessSettings(){if(typeof window>"u"||!window.localStorage)return this.getDefaultSettings();try{const e=localStorage.getItem(this.BUSINESS_KEY);return e?JSON.parse(e):this.getDefaultSettings()}catch{return this.getDefaultSettings()}}saveBusinessSettings(e){typeof window<"u"&&window.localStorage&&localStorage.setItem(this.BUSINESS_KEY,JSON.stringify(e))}getDefaultSettings(){return{name:"Mi Empresa",rif:"J-00000000-0",address:"DirecciÃ³n de la empresa",phone:"+58 412-0000000",email:"info@miempresa.com",taxPercentage:16,currency:"USD"}}clearAll(){typeof window>"u"||!window.localStorage||(localStorage.removeItem(this.CUSTOMERS_KEY),localStorage.removeItem(this.INVOICES_KEY),localStorage.removeItem(this.BUSINESS_KEY))}}const c=new r;export{c as s};
