import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as d}from"./index.Dt7f8qtO.js";import{u as A,C as g,b as x,c as h,e as j,a as f}from"./card.DVB045Go.js";import{I as u}from"./index.DYzhJdR3.js";import{L as c,T as q}from"./textarea.BhzQopP0.js";import{B as m}from"./button.CxzNTtdg.js";import{S as U,a as V,b as O,c as z,d as N}from"./select.DIFDyfJp.js";import"./storage.C5bwaIcf.js";import"./utils.CTFKiaJv.js";import"./index.BGjv5e9X.js";const Y=()=>{const{settings:l,saveSettings:y,clearAll:F}=A(),[n,t]=d.useState(l),[p,v]=d.useState(l.logo),[b,C]=d.useState(l.signature),S=d.useRef(null),E=d.useRef(null);d.useEffect(()=>{t(l),v(l.logo),C(l.signature)},[l]);const o=s=>{const{id:a,value:i}=s.target,r=a.replace("business-","");t(B=>({...B,[r]:r==="taxPercentage"?parseFloat(i):i}))},D=s=>{t(a=>({...a,currency:s}))},w=s=>new Promise((a,i)=>{const r=new FileReader;r.onload=()=>a(r.result),r.onerror=i,r.readAsDataURL(s)}),I=async s=>{const a=s.target.files?.[0];if(a){const i=await w(a);v(i),t(r=>({...r,logo:i}))}},L=async s=>{const a=s.target.files?.[0];if(a){const i=await w(a);C(i),t(r=>({...r,signature:i}))}},P=()=>{v(void 0),t(s=>({...s,logo:void 0}))},T=()=>{C(void 0),t(s=>({...s,signature:void 0}))},R=s=>{s.preventDefault(),y(n),alert("✅ Configuración guardada exitosamente")},k=()=>{confirm(`⚠️ ADVERTENCIA: Esto eliminará TODOS los clientes, facturas y configuración.

¿Estás completamente seguro?`)&&confirm("Esta acción es IRREVERSIBLE. ¿Continuar?")&&(F(),alert("Todos los datos han sido eliminados"),window.location.reload())};return e.jsxs("div",{className:"flex flex-col gap-8 pb-12",children:[e.jsxs(g,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"Información de la Empresa"}),e.jsx(j,{children:"Detalles básicos de tu negocio para las facturas."})]}),e.jsx(f,{children:e.jsxs("form",{id:"business-form",className:"space-y-6",onSubmit:R,children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"business-name",children:"Nombre de la Empresa *"}),e.jsx(u,{id:"business-name",value:n.name,onChange:o,required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"business-rif",children:"RIF *"}),e.jsx(u,{id:"business-rif",value:n.rif,onChange:o,required:!0,placeholder:"J-12345678-9"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"business-address",children:"Dirección *"}),e.jsx(q,{id:"business-address",value:n.address,onChange:o,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"business-phone",children:"Teléfono *"}),e.jsx(u,{id:"business-phone",type:"tel",value:n.phone,onChange:o,required:!0,placeholder:"+58 412-0000000"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"business-email",children:"Email *"}),e.jsx(u,{id:"business-email",type:"email",value:n.email,onChange:o,required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"business-taxPercentage",children:"IVA (%)"}),e.jsx(u,{id:"business-taxPercentage",type:"number",value:n.taxPercentage,onChange:o,min:"0",max:"100",step:"0.1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{children:"Moneda"}),e.jsxs(U,{value:n.currency,onValueChange:D,children:[e.jsx(V,{children:e.jsx(O,{placeholder:"Seleccionar moneda"})}),e.jsxs(z,{children:[e.jsx(N,{value:"USD",children:"USD ($)"}),e.jsx(N,{value:"Bs",children:"Bs (Bolívares)"}),e.jsx(N,{value:"EUR",children:"EUR (€)"})]})]})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs(g,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"Logo de la Empresa"}),e.jsx(j,{children:"Sube el logo de tu empresa (opcional)"})]}),e.jsxs(f,{className:"flex flex-col gap-6 items-center",children:[e.jsx("div",{className:"w-full aspect-video border-2 border-dashed border-muted rounded-lg flex items-center justify-center bg-muted/30 overflow-hidden",children:p?e.jsx("img",{src:p,alt:"Logo",className:"max-w-full max-h-full object-contain"}):e.jsx("p",{className:"text-muted-foreground text-sm",children:"Sin logo"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"file",ref:S,onChange:I,accept:"image/*",className:"hidden"}),e.jsx(m,{variant:"outline",onClick:()=>S.current?.click(),children:"Seleccionar Logo"}),p&&e.jsx(m,{variant:"destructive",onClick:P,children:"Eliminar"})]})]})]}),e.jsxs(g,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"Firma Digital"}),e.jsx(j,{children:"Sube tu firma para las facturas"})]}),e.jsxs(f,{className:"flex flex-col gap-6 items-center",children:[e.jsx("div",{className:"w-full aspect-video border-2 border-dashed border-muted rounded-lg flex items-center justify-center bg-muted/30 overflow-hidden",children:b?e.jsx("img",{src:b,alt:"Firma",className:"max-w-full max-h-full object-contain"}):e.jsx("p",{className:"text-muted-foreground text-sm",children:"Sin firma"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"file",ref:E,onChange:L,accept:"image/*",className:"hidden"}),e.jsx(m,{variant:"outline",onClick:()=>E.current?.click(),children:"Seleccionar Firma"}),b&&e.jsx(m,{variant:"destructive",onClick:T,children:"Eliminar"})]})]})]})]}),e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(m,{size:"lg",className:"min-w-[250px]",onClick:R,children:"Guardar Configuración"})}),e.jsxs(g,{className:"border-destructive/50 bg-destructive/5",children:[e.jsxs(x,{children:[e.jsx(h,{className:"text-destructive",children:"Zona de Peligro"}),e.jsx(j,{children:"Estas acciones son irreversibles"})]}),e.jsx(f,{children:e.jsx(m,{variant:"destructive",onClick:k,children:"Eliminar Todos los Datos"})})]})]})};export{Y as default};
