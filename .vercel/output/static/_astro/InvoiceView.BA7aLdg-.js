import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.BbCjBGhI.js";import{s as a}from"./storage.0hWDOvc9.js";import{I as h}from"./InvoiceTemplate.CpmvSFwM.js";import"./_commonjsHelpers.D6-XlEtG.js";const N=({id:r})=>{const[o,d]=s.useState(null),[u,m]=s.useState(null),[n,x]=s.useState(null),[f,l]=s.useState(!0),[c,i]=s.useState(null);return s.useEffect(()=>{(()=>{try{console.log("InvoiceView: Fetching data for id:",r),l(!0);const t=a.getInvoice(r),p=a.getBusinessSettings();if(!t)i("Factura no encontrada"),console.error("InvoiceView: Invoice not found");else{d(t),x(p);const g=a.getCustomer(t.customerId);m(g),console.log("InvoiceView: Data loaded successfully")}}catch(t){console.error("InvoiceView: Error loading data:",t),i(t instanceof Error?t.message:"Error desconocido al cargar la factura")}finally{l(!1)}})()},[r]),f?e.jsxs("div",{className:"animate-pulse flex flex-col items-center gap-4 py-20 w-full",children:[e.jsx("div",{className:"w-64 h-[400px] bg-white/20 rounded-lg shadow-sm"}),e.jsx("p",{className:"text-white/50 font-medium text-lg",children:"Cargando factura digital..."})]}):c||!o||!n?e.jsxs("div",{className:"bg-white p-12 md:p-20 rounded-3xl text-center shadow-2xl border border-slate-200 max-w-2xl mx-auto w-full",children:[e.jsx("div",{className:"w-20 h-20 bg-error/10 text-error rounded-full flex items-center justify-center mx-auto mb-8 text-4xl",children:"⚠️"}),e.jsx("h2",{className:"text-3xl font-bold font-primary text-slate-900 mb-4",children:c||"Error Inesperado"}),e.jsx("p",{className:"text-slate-500 mb-10 text-lg leading-relaxed",children:"No pudimos procesar la solicitud para ver esta factura. Por favor, verifica que el enlace sea correcto."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx("a",{href:"/facturas",className:"btn btn-primary px-10 py-3 text-base",children:"Volver a Facturas"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-secondary px-10 py-3 text-base",children:"Reintentar"})]})]}):e.jsx("div",{className:"w-full flex justify-center animate-in fade-in zoom-in-95 duration-500",children:e.jsx(h,{invoice:o,businessSettings:n,customer:u})})};export{N as default};
